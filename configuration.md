---

copyright:
  years: 2018, 2019
lastupdated: "2019-03-08"

keywords: configure go environment, go environment

subcollection: go

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}
{:tip: .tip}

# Configuring the Go environment
{: #configure-go-env}

Standardized guidelines are available to follow for developing Go applications that help to maintain consistent portability. Considerations to make include credential management, saving data, storing data, and publishing content to the cloud. By following Cloud Native practices, a Go application can move from one environment to another easily. For example, from testing into production, without changing code, or exercising otherwise untested code paths.

Whether you need to add cloud support to existing Go applications or create Go apps with Starter Kits, the goal is to provide portability for use with any development platform.

## Adding Cloud support to existing Go applications
{: #go-add-cloud-support}

The [`ibm-cloud-env-golang`](https://github.com/ibm-developer/ibm-cloud-env-golang){: new_window} ![External link icon](../icons/launch-glyph.svg "External link icon") module aggregates environment variables from various Cloud providers, such as CloudFoundry and Kubernetes, so the application is independent of the environment.

### Installing the `ibm-cloud-env-golang` module
{: #go-install-env-module}

1. Install the `ibm-cloud-env-golang` module with the following command:
  ```bash
  go get github.com/ibm-developer/ibm-cloud-env-golang
  ```
  {: codeblock}

2. Initialize the module in your code by referencing the `mappings.json` file:
  ```golang
  import "github.com/ibm-developer/ibm-cloud-env-golang"
  IBMCloudEnv.Initialize("/path/to/the/mappings/file/relative/to/project/root")
  ```
  {: codeblock}

  Since Go doesn't support default parameters, a default `mappings.json` file isn't provided. If the mappings file path isn't specified in `IBMCloudEnv.Initialize()`, an error is logged. 
  {: tip}

  Example `mappings.json` file:
  ```javascript
  {
      "service1-credentials": {
          "searchPatterns": [
              "user-provided:my-service1-instance-name:service1-credentials",
              "cloudfoundry:my-service1-instance-name", 
              "env:my-service1-credentials", 
              "file:/localdev/my-service1-credentials.json" 
          ]
      },
      "service2-username": {
         "searchPatterns":[
              "user-provided:my-service2-instance-name:username",
              "cloudfoundry:$.service2[@.name=='my-service2-instance-name'].credentials.username",
              "env:my-service2-credentials:$.username",
              "file:/localdev/my-service1-credentials.json:$.username"
         ]
      }
  }
  ```
  {: codeblock}

### Retrieving service credentials
{: #go-get-creds}

Retrieve the values in your application by using the following commands.

1. Retrieve variable `service1credentials`:
  ```golang
  service1credentials := IBMCloudEnv.GetDictionary("service1-credentials"); 
  ```
  {: codeblock}

2. Retrieve variable `service2username`:
  ```golang
  service2username := IBMCloudEnv.GetString("service2-username");
  ```
  {: codeblock}

Now your application can be implemented in any runtime-environment by abstracting the differences that are introduced from different Cloud compute providers.

### Filtering the values for tags and labels
{: #go-filter-creds}

You can filter credentials that are generated by the module based on service tags and service labels as shown in the following example:
```golang
filtered_credentials := IBMCloudEnv.GetCredentialsForService(tag, label, credentials)); // returns a Json with credentials for specified service tag and label
```
{: codeblock}

## Using the Go configuration manager from Starter Kit apps
{: #go-config-manager}

Go apps that are created with [Starter Kits](https://cloud.ibm.com/developer/appservice/starter-kits/){: new_window} ![External link icon](../icons/launch-glyph.svg "External link icon") automatically come with credentials and configurations that are needed to run in many cloud deployment targets, such as Cloud Foundry, Kubernetes, VSI, and Functions).

### Understanding service credentials
{: #go-credentials-config}

Your application configuration information for services is stored in the `localdev-config.json` file in the `/server/config` directory. The file is in the `.gitignore` directory to prevent sensitive information from being stored in Git. The connection information for any configured service that runs locally, such as user name, password, and host name, is stored in this file.

The application uses the configuration manager to read the connection and configuration information from the environment and this file. It uses a custom-built `mappings.json`, which is located in the `server/config` directory, to communicate where the credentials can be found for each service.

If the application is running locally, it can connect to {{site.data.keyword.cloud_notm}} services by using unbound credentials that are read from the `mappings.json` file. But if you need to create unbound credentials, you can do so from the {{site.data.keyword.cloud_notm}} web console (example), or by using the [CloudFoundry CLI](https://docs.cloudfoundry.org/cf-cli/){: new_window} ![External link icon](../icons/launch-glyph.svg "External link icon") `cf create-service-key` command.

When you push your application to {{site.data.keyword.cloud_notm}}, these values are no longer used. Instead, the application automatically connects to bound services by using environment variables. 

* **Cloud Foundry**: Service credentials are taken from the `VCAP_SERVICES` environment variable.

* **Kubernetes**: Service credentials are taken from individual environment variables per service.

* **{{site.data.keyword.cloud_notm}} Container Service**: Service credentials are taken from virtual server instances or {{site.data.keyword.openwhisk}} (Openwhisk).

## Next Steps
{: #go-next-steps-config notoc}

The `ibm-cloud-env-golang` supports searching for values by using four search pattern types: `user-provided`, `cloudfoundry`, `env`, and `file`. If you would like to check out other supported search patterns and search pattern examples, check the [Usage](https://github.com/ibm-developer/ibm-cloud-env-golang#usage){: new_window} ![External link icon](../icons/launch-glyph.svg "External link icon") section.